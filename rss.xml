<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Matt Copperwaite</title><link>https://matt.copperwaite.net/</link><description>Recent content on Matt Copperwaite</description><generator>Hugo -- gohugo.io</generator><language>en-gb</language><managingEditor>matt@copperwaite.net (Matt Copperwaite)</managingEditor><webMaster>matt@copperwaite.net (Matt Copperwaite)</webMaster><copyright>CC BY-SA 4.0</copyright><atom:link href="https://matt.copperwaite.net/rss.xml" rel="self" type="application/rss+xml"/><item><title>Keys, Secrets, and Tokens</title><link>https://matt.copperwaite.net/blog/keys-tokens-secrets/</link><pubDate>Wed, 26 Apr 2023 18:10:32 +0000</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/keys-tokens-secrets/</guid><description>&lt;p>I have spent some of my time over the last 12 months working out how to improve our response to, first the &lt;a href="https://www.theregister.com/2022/04/21/github-stolen-oauth-tokens-used-in-breaches/">Heroku leaks&lt;/a>, followed later by the &lt;a href="https://www.wired.com/story/lastpass-engineer-breach-security-roundup/">LastPass leaks&lt;/a>, closely followed by the &lt;a href="https://circleci.com/blog/january-4-2023-security-alert/">CircleCI leaks&lt;/a>. Each of which took a significant amount of time to resolve, time that could have spent improving the features and capability of our main product.&lt;/p>
&lt;p>Something I identified, as part of this response, was that as engineers, have several names for things that are very closely related, namely, Keys, Secrets and Tokens, there might even be others. I think any seasoned engineer will recognise that they do refer to different things, after all, we have &lt;a href="https://aws.amazon.com/kms/">AWS KMS&lt;/a> and &lt;a href="https://docs.aws.amazon.com/secretsmanager/latest/userguide/intro.html">AWS Secrets Manager&lt;/a>. But an IAM User has &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html">both keys and secrets&lt;/a> and that keys is a different kind of key to the KMS key.&lt;/p>
&lt;p>Having a common language reduces change fatigue and rework when a problem that everyone who thought they understood a problem discovered that they didn&amp;rsquo;t. This way we can have better confidence in the outcomes of the problem we&amp;rsquo;re discussing.&lt;/p>
&lt;p>I needed a way of describing, without significant friction, a way to refer to values that are used by systems to interoperate (i.e.: not a password), are sensitive, and need careful management.&lt;/p>
&lt;p>I decided that the best word to encompass this was &lt;em>Secret&lt;/em>. It seemed like it had more meaning, in a more succinct way than any of the other terms available.&lt;/p>
&lt;p>I proposed this to our business via our usual engineering approvals board and it got accepted.&lt;/p>
&lt;p>It&amp;rsquo;s not to say that the usage of the word Key, or Token is banned, but that Secret emcompassed them all. The word &lt;em>Secret&lt;/em> could also mean a key or a token. Something sensitive that needs protecting.&lt;/p>
&lt;p>There are likely differences in each business that may mean that &lt;em>secret&lt;/em> isn&amp;rsquo;t the right word for you, but having at least an awareness how these words mean similar, or different things can be helpful.&lt;/p></description></item><item><title>Social Marketing</title><link>https://matt.copperwaite.net/blog/social-marketing/</link><pubDate>Fri, 17 Mar 2023 18:10:32 +0000</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/social-marketing/</guid><description>&lt;p>Cyber Security is not something that many engineering teams consider automatically, in the same way that it&amp;rsquo;s common that engineering teams rarely consider the data governance or legal implications of the product they are looking to build. The team is there to solve user stories, real or imaginary, and the external factors, such as security, may only be considered once on the journey to delivery.&lt;/p>
&lt;p>As security people we recognise that directing changes early has the lowest impact on delivery. But making cyber security integral to the delivery path is to have a dedicated person on each team gets expensive fast. Either as additional effort for each team, or as gatekeepers blocking releases.&lt;/p>
&lt;p>Instead cyber security teams must accept that security will be included in the delivery at some point and make it our responsibility to intervene and educate engineers so that they can effect changes, or ask questions, as early as possible.&lt;/p>
&lt;p>This thinking made me want to explore how to create more intervention opporunities by improving communication in the early stages of a delivery.&lt;/p>
&lt;p>One industry that I realised is good at making people change their thinking was marketing.&lt;/p>
&lt;p>Marketing, to me, has a strong association with unethical practices, but tweaked in the right way I wanted to see if there might be some re-usable techniques to change people&amp;rsquo;s thinking about cyber security.&lt;/p>
&lt;p>I reached out to my friends in NCSC because they have a responsibility to do exactly this, communicate to the general public to suggest ways to improve their security so that money and people&amp;rsquo;s data doesn&amp;rsquo;t get stolen.&lt;/p>
&lt;p>From there I was directed towards some academic research titled &lt;a href="https://www.semanticscholar.org/paper/Can-we-sell-security-like-soap%3A-a-new-approach-to-Ashenden-Lawrence/453101f65188b8f4bedafb3fe2fb267c969993e4#citing-papers">Can we sell security like soap?&lt;/a> which is a wonderful analogy.&lt;/p>
&lt;p>The thing that I liked though is the concept of &lt;a href="https://en.m.wikipedia.org/wiki/Social_marketing">Social Marketing&lt;/a>. As a side note, I want to be clear this is different from Social Media Marketing, and while looking for books on Amazon it also gets it mixed up.&lt;/p>
&lt;p>Unfortunately I&amp;rsquo;ve not yet been able to identify a set of guidelines that help me. A lot of what I&amp;rsquo;ve read so far seems to originate from academia without much grounding it in the practical working world.&lt;/p>
&lt;p>But perhaps that&amp;rsquo;s the point. As people working in Cyber Security our responsibility is to take what has been writen and turn it in to something consumable that will make others more effective.&lt;/p></description></item><item><title>Security and Inclusivity</title><link>https://matt.copperwaite.net/blog/security-and-inclusivity/</link><pubDate>Wed, 08 Feb 2023 09:40:32 +0000</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/security-and-inclusivity/</guid><description>&lt;p>I do a lot of thinking about second and third order effects, and how poor security controls impacts the culture of a business and in particular can reduce inclusivity.&lt;/p>
&lt;p>By way of an example of this, and the common Cyber Security control that most annoys me, is the way accounts expire after not being used for some time. Without digging in to the background too much it comes about because in business it&amp;rsquo;s often difficult to have a reliable leavers process. This leads to user accounts existing long after its owner has left the business.&lt;/p>
&lt;!--alex ignore maternity-paternity-->
&lt;p>Automatic blocking of accounts will always be inexact and this is the cause of inclusivity problems. You will identify common absences from work such, such as maternity, or stress.&lt;/p>
&lt;p>The true answer in this scenario is to get accounts blocked as part of the leavers process, making it as important as ensuring they&amp;rsquo;re no-longer being paid. This will have a big impact on reducing the risk to your business.&lt;/p>
&lt;p>There will still be edge cases, and it&amp;rsquo;s worth including additional steps to detect long-lived accounts. You can also apply an human action of verifying if the account is still needed. You could even automate this by sending an e-mail to a line manager that explains the risks and impact, asking them to click a link if the account can be blocked.&lt;/p>
&lt;p>If you were that person coming back to work after time off from stress. Having to go through a support number, prove their identity, and get their account unlocked. Turning that excitement to disapointment. Does that represent your business? &lt;em>Should&lt;/em> that represent your business?&lt;/p>
&lt;p>And this is far from the only control that has this kind of impact.&lt;/p>
&lt;!--alex ignore obvious-->
&lt;p>When presented with a risk, as IT people we think about the controls we have available to us and the mitigation may seem obvious. It takes time and research to identify the impact of it and further time and work to fix the underlying problems. Although without that work the change is to effect the culture of the business.&lt;/p>
&lt;p>This makes one of the true Cyber Security responsibilities to ensure that security controls are reasonable, equitable, and justified.&lt;/p></description></item><item><title>Safety and Security</title><link>https://matt.copperwaite.net/blog/safety-and-security/</link><pubDate>Mon, 28 Nov 2022 18:10:32 +0000</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/safety-and-security/</guid><description>&lt;!--alex disable shit fuck -->
&lt;!--alex disable he-she daughter-son brother-sister dads-moms -->
&lt;!--alex disable of-course obvious -->
&lt;!--alex disable uk -->
&lt;!--alex disable failure -->
&lt;p>It is dark. You hear a beep.&lt;/p>
&lt;p>It is dark. Another beep.&lt;/p>
&lt;p>You check the time. It&amp;rsquo;s almost 2.30am.&lt;/p>
&lt;p>Another beep.&lt;/p>
&lt;p>What is that?&lt;/p>
&lt;p>Is it from outside?&lt;/p>
&lt;p>You open a window and wait.&lt;/p>
&lt;p>You hear a beep.&lt;/p>
&lt;p>It&amp;rsquo;s not outside. That must mean it&amp;rsquo;s inside. That means it&amp;rsquo;s your problem.&lt;/p>
&lt;p>Shit.&lt;/p>
&lt;p>There are lots of things it &lt;em>could&lt;/em> be. They&amp;rsquo;re all over the house. From the fridge to the carbon monoxide detectors.&lt;/p>
&lt;p>Bleary eyed you stalk around the house, stopping occasionally to see if you can hear the direction of the beep.&lt;/p>
&lt;p>Going in to one room, doubling back on yourself.&lt;/p>
&lt;p>Eventually. A beep above your head. A smoke alarm. Of course it is.&lt;/p>
&lt;p>Your child is asleep in the next room. He doesn&amp;rsquo;t sleep well. You have to silence the smoke alarm quickly and quietly.&lt;/p>
&lt;!--alex ignore fire -->
&lt;p>What does the beeping mean? The house is not on fire. You happened to have gone around the house already.&lt;/p>
&lt;p>The beeping could mean anything. You don&amp;rsquo;t know the cause. Your mind races. The smoke alarm is mains powered. The smoke alarm could have lost power. Did you do anything recently that might have caused the smoke alarm to have lost power? Has there been a power cut? Could the battery have lost power? Does it have a battery? &lt;em>Should&lt;/em> the battery have lost power if it&amp;rsquo;s been running off mains? How would the smoke alarm know the battery is dying if it mains powered, it isn&amp;rsquo;t using it.&lt;/p>
&lt;p>You check online for anything else it could be. It&amp;rsquo;s 3 am. You want to sleep, not diagnose a beeping smoke alarm that will wake up your family.&lt;/p>
&lt;p>There are loads of websites giving you lots of options depending on the type of smoke alarm you have and the kind of beep it&amp;rsquo;s making. You don&amp;rsquo;t know the make and model of my smoke alarm, they came with the house.&lt;/p>
&lt;p>Apparently it&amp;rsquo;s common for batteries to start failing during the night when the tempurature drops, causing the battery to be less effective.&lt;/p>
&lt;!--alex ignore fire just -->
&lt;p>All the smoke alarms are on their own circuit. You could turn the whole thing off and worry about it in the morning. It seems unlikely there would happen to be a fire just then. But would that make things worse? Would the smoke alarm keep working off their batteries and drain them faster causing more of them to beep? Would it set all the smoke alarms off as a failsafe?&lt;/p>
&lt;p>Your best bet is to replace the battery. &lt;a href="https://www.bbc.co.uk/programmes/p0c2g9kr">Often people don&amp;rsquo;t know&lt;/a> that a beeping smoke alarm means the battery needs replacing.&lt;/p>
&lt;p>Is there a spare? Yes. Fortunately. Lets not think about what you would do if that wasn&amp;rsquo;t the case.&lt;/p>
&lt;p>It&amp;rsquo;s also fortunate this is not one that needs a massive ladder to reach.&lt;/p>
&lt;p>Now how do you replace the battery? How do you open the smoke alarm?&lt;/p>
&lt;!--alex ignore hole -->
&lt;p>Written on the smoke alarm is an obscure instruction about pushing a screwdriver in to a hole on the side. Looks like you&amp;rsquo;ll need to find a screwdriver then. Why do you need to find a screwdriver at 3.30am? Fortunately you know where one is.&lt;/p>
&lt;p>You follow the instructions. The smoke alarm is slightly too close to the wall and the screwdriver almost doesn&amp;rsquo;t fit. You still cannot work out how to get the old battery out. Your arms are so tired from holding them above my head for so long.&lt;/p>
&lt;!--alex ignore angry -->
&lt;p>You&amp;rsquo;re frustrated, angry. You lose it. You pull on the case. Maybe there is a way in. After easing it a bit, it comes away.&lt;/p>
&lt;p>No access to the battery.&lt;/p>
&lt;p>Fuck.&lt;/p>
&lt;p>At least now you can see how you &lt;em>would&lt;/em> get to the draw that holds the battery.&lt;/p>
&lt;p>After a bit of prying a draw pops out and the battery drops out of the draw.&lt;/p>
&lt;p>Replace the battery. Put the draw back in.&lt;/p>
&lt;p>No beeping?&lt;/p>
&lt;p>Go back to bed.&lt;/p>
&lt;p>The adrenaline is surging.&lt;/p>
&lt;p>You&amp;rsquo;re waiting for the next beep. Was that a beep?&lt;/p>
&lt;p>You stay awake until your son wakes at 6.30am.&lt;/p>
&lt;h2 id="the-next-morning">The next morning&lt;/h2>
&lt;p>Your electrician advises that there are very high voltages in the smoke alarm due to the electronics used to check for smoke. Removing the case was dangerous. It is best to replace the unit.&lt;/p>
&lt;p>Given no one knows the age or history of any of the smoke alarms and that you have a young family you make the decision to replace them all.&lt;/p>
&lt;p>The electrician recommends the most popular brand. It&amp;rsquo;s the exact same model you already have.&lt;/p>
&lt;p>At least you know how to replace the battery now.&lt;/p>
&lt;h2 id="coda">Coda&lt;/h2>
&lt;p>For the UK the regulations used to say that, when adding a loft extension to your house, that all doors were replaced with firedoors that self close.&lt;/p>
&lt;p>People found all the doors in your house being closed was inconvenient, this lead to people propping the doors open. So the regulations were changed to install smoke alarms in all rooms that are linked.&lt;/p>
&lt;p>This is incredibly sensible and pragmatic advice that responds to people&amp;rsquo;s real-world usage of safety equipment.&lt;/p>
&lt;p>When talking about security I regularly like to frame it to the world of safety. Safety is tangible and people like talking about safety. But I recognise that they&amp;rsquo;re often not directly comparable.&lt;/p>
&lt;p>Safety equipment is often tied to a regulations that can be complex and expensive to change. But safety equipment can also have the same failings as a lot of security products do. Poor documentation. Poor user experience, especially when things go really wrong. Poor quality alerts.&lt;/p>
&lt;p>If you want to build good, reliable, and accurate equipment you need to think about how they fail, and how your users will over-come the failure.&lt;/p>
&lt;p>Because right now I don&amp;rsquo;t want smoke alarms in my house. I would rather have a relaxing and peaceful night sleep. I won&amp;rsquo;t be alone in that motiviation.&lt;/p>
&lt;p>I wish this story was not based on real events.&lt;/p></description></item><item><title>Reminiscing over the OWASP Top 10</title><link>https://matt.copperwaite.net/blog/reminiscing-over-the-owasp-top-10/</link><pubDate>Sat, 22 Oct 2022 14:10:32 +0000</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/reminiscing-over-the-owasp-top-10/</guid><description>&lt;!--alex disable failure-->
&lt;!--alex disable failures-->
&lt;p>I was having a discussion with some freinds recently where we found that we were in agreement about how &lt;a href="https://web.archive.org/web/20221008005542/https://owasp.org/Top10/">much less useful the OWASP Top 10 list is since the updates&lt;/a>. I found that no one had written anything that was critical of the 2021 changes.&lt;/p>
&lt;p>Before the 2021 change I would use the OWASP Top 10 as a checklist for when engineers wanted to know how to improve the security of their web services.&lt;/p>
&lt;p>Understandably the delivery of web services has changed significantly since the last time the Top 10 was run in 2017. But those changes don&amp;rsquo;t apply to everyone.&lt;/p>
&lt;p>It&amp;rsquo;s good that OWASP are looking to include more of the delivery pipeline. But this means when I direct an engineer to it they&amp;rsquo;re provided confusing wording and subjects that could be outside of their responsibility, making engineers looking to cover the basics no-longer able to find the information they need.&lt;/p>
&lt;p>Here are the changes I find interesting:&lt;/p>
&lt;ul>
&lt;li>A02:2021-Cryptographic Failures: This one used to be about data leaks. This is now somehow, about cryptographic failure, crypto, sounds like, if not about Bitcoin, then about encryption. Would gaining access to a public file in S3 that contains sensitive data count as a cryptographic failure?&lt;/li>
&lt;li>A04:2021-Insecure Design: This one talks about &amp;ldquo;move left&amp;rdquo; with &lt;a href="https://en.wikipedia.org/wiki/Scare_quotes">scare quotes&lt;/a> like it&amp;rsquo;s a fad. Insecure Design sounds to me like an upfront task, before any engineer has a look-in.&lt;/li>
&lt;li>A05:2021-Security Misconfiguration: Security Misconfiguration is pretty much the entire list isn&amp;rsquo;t it?&lt;/li>
&lt;li>A09:2021-Security Logging and Monitoring Failures: Is it a failure? Or does it not exist?&lt;/li>
&lt;li>Also &lt;em>A06:2021-Vulnerable and Outdated Components&lt;/em> and &lt;em>A08:2021-Software and Data Integrity Failures&lt;/em> are too closely related.&lt;/li>
&lt;/ul>
&lt;p>The changes and the reasoning for them is not well explained on the Top 10 page itself. If I was looking for advice on how to to secure pipeline I would not automatically think of OWASP. Instead I think I will still use the &lt;a href="https://web.archive.org/web/20210820092716/https://owasp.org/www-project-top-ten/">2017 reference for in most situations&lt;/a>.&lt;/p></description></item><item><title>Sophisticated Attack</title><link>https://matt.copperwaite.net/blog/sophisticated-attack/</link><pubDate>Thu, 29 Sep 2022 18:18:32 +0100</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/sophisticated-attack/</guid><description>&lt;!--alex disable attack-->
&lt;!--alex disable attacks-->
&lt;p>A trend I and some friends in the industry noticed over the last few years is that whenever a company gets hacked they almost always &lt;a href="https://www.google.com/search?q=site%3Abbc.co.uk%2Fnews%20%22sophisticated%20attack%22">call it a &amp;ldquo;sophisticated attack&amp;rdquo;&lt;/a>. It kind of became a running joke, no-matter whether the attack was a Denial of Service, or data left in a public S3 bucket, that term was always used.&lt;/p>
&lt;p>The latest one to use that term is the &lt;a href="https://www.bbc.co.uk/news/world-australia-63056838">Chief Executive of Optus&lt;/a>, a mobile service provider in Australia, when they had their data stolen, seemingly by having their data available publicly on the web. This time &lt;a href="https://twitter.com/ClareONeilMP/status/1574361824102711296">the government of Australia called them out on this&lt;/a>. Serious questions should be asked whether a government should call out a private business in that way, and the impact on their working relationship in the future, but it is refreshing for that term being picked up as being false by the media.&lt;/p>
&lt;p>What&amp;rsquo;s strange is that whenever these hacks occur they always use the same &amp;lsquo;sophisticated attack&amp;rsquo; term. Almost as if there is a single comms playbook being used across all these organisations and countries.&lt;/p>
&lt;p>The reason the term is used is because companies want the public to think that the hack wasn&amp;rsquo;t a trivial amount of effort and deflecting criticism that the company were negligent in their responsibilities in finding and patching vulnerabilities. Whereas the reality is that these events are inevitable and we need to plan for and minimise them. Does a mobile service provider need to store people&amp;rsquo;s driving license details?&lt;/p>
&lt;p>Anyway, I wanted to explore why this term &amp;lsquo;sophisticated attack&amp;rsquo; is being so widely used. Where did it originate? How old is it? Is there a playbook? And lastly, can we improve how it is used?&lt;/p>
&lt;p>The first step is to check Google Trends:&lt;/p>
&lt;p>&lt;a href="https://trends.google.co.uk/trends/explore?date=all&amp;amp;q=%22sophisticated%20attack%22&amp;amp;hl=en-GB">&lt;img src="https://matt.copperwaite.net/img/blog-post/sophisticated-attack/google-trends.png" alt="A chart of Google Trends">&lt;/a>&lt;/p>
&lt;p>Well that was disappointing. I was expecting a linear or exponential increase. If anything it&amp;rsquo;s a decrease. The related queries seem to involve military usage, so perhaps the term originates in the military and that has been transferred to cyber security. It wouldn&amp;rsquo;t be the first time.&lt;/p>
&lt;p>During this research I discovered that &lt;a href="https://www.engadget.com/2016-06-06-dnp-sophisticated-hack-attack-dont-believe-the-hype.html">I&amp;rsquo;m not alone&lt;/a> in trying to look in to the origins. I don&amp;rsquo;t agree with some of the language used, but if a paid journalist can&amp;rsquo;t find the origins I don&amp;rsquo;t think I can either.&lt;/p>
&lt;p>Ok, so let&amp;rsquo;s finish off by looking at how we can use the term &amp;lsquo;sophisticated attack&amp;rsquo; better.&lt;/p>
&lt;p>Lets start by identifying what it is not. Some of the types of attack people in the industry tend to exclude are open services leaking data and DDoS. I don&amp;rsquo;t want to base the definition off a list of types of weaknesses because having an exhaustive list will be difficult to maintain. The other commonality is that these exploits can be performed by anyone pressing a button, such as on a DDoS service or an online scanning tool like Nessus. It seems to me then that the definition can exclude running a single script or action to perform the exploit.&lt;/p>
&lt;p>That means that chaining exploits is probably a better way to define the level of sophistication. If the attack involved 2 or more steps to get access to the data that seems like it took effort and skill. If an attacker found a &lt;a href="https://owasp.org/www-community/attacks/Server_Side_Request_Forgery">SSRF&lt;/a> to exfiltrate cookies and used that to gain access to a poorly protected admin interface, that is 2 or 3 steps. By these metrics that is sophisticated. Perhaps for you it may mean 4 steps.&lt;/p>
&lt;p>This measure also means as security improves 2 steps can be the norm and 3 steps will be the new sophisticated.&lt;/p>
&lt;p>By communicating about these attacks better we can start to have real conversations about how to protect data better.&lt;/p></description></item><item><title>Experiments in Stateless Terraform</title><link>https://matt.copperwaite.net/blog/experiments-in-stateless-terraform/</link><pubDate>Tue, 31 May 2022 18:10:32 +0100</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/experiments-in-stateless-terraform/</guid><description>&lt;p>&lt;a href="https://www.bejarano.io/terraform-stateless/">This article about the history of statefulness in Terraform&lt;/a> really resonated with me. Over the last few months I have been playing with setting up Terraform in such a way that the state file was no-longer required.&lt;/p>
&lt;p>This post is about sharing my observations from those experiments because what I found instead was that with the current way AWS works, while it is possible to use Terraform without state, there are some limitations with AWS that made this more difficult than you would expect.&lt;/p>
&lt;p>The key issue you encounter when you no-longer know the state of your infrastructure is identifying which resources are no-longer needed. You either need to enumerate them, or to discard them without being aware that they exist. The first solution I tried was to use the AWS Account as an ephemeral container for everything that is built and destroyed. This guarantees to find everything and is reasonably quick to achieve.&lt;/p>
&lt;p>I do recognise that what I&amp;rsquo;m attempting to do is a hack, Terraform and AWS are not designed to be used this way. Terraform has not made their decision to use state in isolation, they will have encountered the problems I further on in this article and the solution they went for was adding complexity through state. I don&amp;rsquo;t see that as unreasonable, they made those decisions based upon the limitations of AWS at the time, and AWS made their own decisions based on assumptions about how their infrastructure was intended to be used.&lt;/p>
&lt;h2 id="becoming-stateless">Becoming stateless&lt;/h2>
&lt;p>The concept is that everything you need is first built in to one AWS Account and when you want to release a new instance, re-create everything in a second AWS Account and fail over to it. The first AWS Account can then be removed. A separate AWS Account with a load balancer can then perform the switching when the new infrastructure is up and running. This is a form of &lt;a href="https://www.redhat.com/en/topics/devops/what-is-blue-green-deployment">Green/Blue Deployment&lt;/a>.&lt;/p>
&lt;h2 id="member_account_payment_instrument_required">MEMBER_ACCOUNT_PAYMENT_INSTRUMENT_REQUIRED&lt;/h2>
&lt;p>There are a some limitations with this, and this is where I think it gets interesting.&lt;/p>
&lt;p>My first thought to clearing out the old resources is to delete the AWS Account. However, the deletion of AWS Accounts from an AWS Organization requires the sub-account to have credit card details associated to the Account. That makes it a manual step. A manual step means no automated Green/Blue deployment.&lt;/p>
&lt;!--alex ignore black hole-->
&lt;p>There is an alternative. I call it the &amp;ldquo;black hole&amp;rdquo;. This is an OU in your AWS Organization that has a policy on it that prevents all roles from being assumed in that Account. That way your resources cannot run and your cost will reach zero.&lt;/p>
&lt;p>This then runs in to another issue. There are soft limits on the number of sub-Accounts that an AWS Organization can have. By default 10. When you&amp;rsquo;re doing continuous deployments, you do the math on the number of Accounts you will need per day. It &lt;em>is&lt;/em> a &lt;em>soft&lt;/em> limit, so you can ask Amazon nicely for it to be increased, but I bet in a short amount of time you will have an unhappy Amazon asking you what you are up to and can you please stop.&lt;/p>
&lt;h2 id="better-solutions">Better Solutions&lt;/h2>
&lt;p>The only other way of doing this is to follow the enumeration path. Fortunately tooling such as &lt;a href="https://github.com/gruntwork-io/cloud-nuke">cloud-nuke&lt;/a> exist to empty an AWS Account of resources. You can even be selective about allow-listing certain resources, but it is a very slow process and it &lt;a href="https://github.com/gruntwork-io/cloud-nuke/issues/281">may not cover everything&lt;/a>.&lt;/p>
&lt;p>However, the interesting part here was finding the limits of what was possible in AWS. Not something I encounter often. I don&amp;rsquo;t have a lot of experience in other PaaS services so I would love to hear if doing this is possible in Azure or GCP.&lt;/p>
&lt;p>I do wonder if its something Amazon will fix, but I also think it is a fundamental limitation in how AWS assumed Accounts would be used. Otherwise they would have no doubt made it easier.&lt;/p>
&lt;p>A different, but unattainable solution I&amp;rsquo;ve started to see with services like &lt;a href="https://docs.fastly.com/en/guides/working-with-services#editing-and-activating-versions-of-services">Fastly&lt;/a> and &lt;a href="https://docs.doppler.com/docs/versioning">Doppler&lt;/a> is that they have configuration versioning built right in to their web UI.&lt;/p>
&lt;p>I am hopeful that this is a tend towards a &lt;a href="https://www.lastweekinaws.com/blog/clickops/">ClickOps model&lt;/a> which has the ability to make Infrastructure as Code, and therefore managing state, redundant. The first PaaS services to do infrastructure versioning this way is going to get a lot of attention to me. However, I don&amp;rsquo;t see this happening in AWS for a long time.&lt;/p></description></item><item><title>What does the future look like</title><link>https://matt.copperwaite.net/blog/predicting-the-future/</link><pubDate>Thu, 14 Apr 2022 18:12:32 +0100</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/predicting-the-future/</guid><description>&lt;p>I remember back in the late 90s and early 2000s there was a portion of the population that were fascinated by the culture of Japan. One aspect of that, that captured people&amp;rsquo;s imagination is how we used to find it so odd that at &amp;ldquo;celebrities&amp;rdquo; like &lt;a href="https://youtu.be/_EnFSwVV-c4">Sylvester Stallone&lt;/a> and &lt;a href="https://youtu.be/6s8qn_PKbiA">Arnold Schwarzenegger&lt;/a> were doing adverts for strange products in languages other than their own. This became such a part of our own culture that it was even &lt;a href="https://youtu.be/uOy2lrJqKGY">parodied in the TV series Friends&lt;/a>.&lt;/p>
&lt;p>These days we&amp;rsquo;re not even shocked when &amp;ldquo;celebrities&amp;rdquo; like &lt;a href="https://youtu.be/IeQhtFS8KU0?t=14">George Clooney endorsing coffee&lt;/a>, or &lt;a href="https://youtu.be/uFPEedHvHqs">Snoop Dogg rapping about take-away apps&lt;/a>.&lt;/p>
&lt;p>Being a fan of Sci-Fi I&amp;rsquo;m fascinated by the idea of what we would make of technology from the future. If a smart phone from 2050 landed in your hand, how would you interpret it? Or use it? Would it even be recognisable? We can&amp;rsquo;t know what it would look like, but I think we can predict our feelings towards it.&lt;/p>
&lt;!--alex ignore simple-->
&lt;p>This past week I listened to a &lt;a href="https://podcasts.google.com/feed/aHR0cHM6Ly9mZWVkcy5tZWdhcGhvbmUuZm0vY2F1dGlvbmFyeXRhbGVz/episode/YjZmYjI1MzAtYWY1NS0xMWVjLWEyYTgtMmYwODg4M2JjMDJl?sa=X&amp;amp;ved=0CAUQkfYCahcKEwiI163Mw4T3AhUAAAAAHQAAAAAQAQ">Cautionary Tales episode about the Sinclair C5&lt;/a> in which they dramatised the launch of the C5, a &amp;ldquo;revolutionary&amp;rdquo; electric vehicle. Among its many failings, such as being incapable of coping with the weather of the country in which it was launched, it was also simply &amp;ldquo;weird&amp;rdquo;.&lt;/p>
&lt;p>The C5 was unlike everything anyone had seen before. Even now, in a world with &lt;a href="https://ridedott.com/ride-with-us/london">eScooters&lt;/a> and &lt;a href="https://www.amazon.co.uk/FLYING-ANT-Hoverboard-Balancing-Certified-Green-bluetooth/dp/B08GFQ5FVS">hoverboards&lt;/a>, the C5 looks like a strange device &amp;ndash; although that could be to do with the 80s styling.&lt;/p>
&lt;p>I think this can tell us something about those who are yet to be exposed to practices such as ZeroTrust and DevOps practices, or those that have been exposed and are resistant to it. There is no doubt those ways of working are here and likely to stay, and may well be superseded. But some people view modern engineering techniques as this odd, alien, concept that upsets everything that has gone before it. Those people are like us, viewing the culture of Japan through a lens of &amp;ldquo;well this is weird&amp;rdquo;.&lt;/p>
&lt;p>Through my own experience of learning and practising Agile techniques, I found it&amp;rsquo;s a total mind-shift from the traditional way of working. It turns up-side-down so much of what we&amp;rsquo;re taught by companies, society, and universities.&lt;/p>
&lt;p>It also challenges many things outside an engineering team, things that are usually deemed sacred, like finance and procurement. Making it so that even if your engineering team does adopt it, it&amp;rsquo;s full effect cannot be achieved without a holistic cultural shift in your organisation.&lt;/p>
&lt;p>Remembering those early days is important, to remember how you felt, how you got to a stage where you were comfortable, and to use those &amp;ldquo;aha!&amp;rdquo; moments to bring others on the journey with you.&lt;/p>
&lt;p>I hope to write about the best way I find to achieve adoption soon. Implementing Agile methodologies across an organisation certainly is a slow process and potentially generational in nature, and it cannot be done in isolation to work effectively. But I hope that this gives you a sense of empathy towards those who may not have even heard of it.&lt;/p></description></item><item><title>About Me</title><link>https://matt.copperwaite.net/about-me/</link><pubDate>Tue, 08 Mar 2022 09:00:00 +0100</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/about-me/</guid><description>&lt;!--alex ignore servant-->
&lt;p>Hi, I&amp;rsquo;m Matt Copperwaite. I was formally employed as a Civil Servant for the United Kingdom Government for more than 10 years. I am currently working in Cyber Security for the Financial Times.&lt;/p>
&lt;p>I started off as a Software Engineer, but got heavily involved in IT infrastructure projects and am now specialising in applying IT security to projects using Agile and DevOps techniques.&lt;/p>
&lt;p>The content of this blog does not necessarily represent the views of my employer.&lt;/p></description></item><item><title>The Maintenance Cost of Security Controls</title><link>https://matt.copperwaite.net/blog/maintenance-cost-of-security-controls/</link><pubDate>Thu, 16 Dec 2021 13:00:32 +0100</pubDate><author>matt@copperwaite.net (Matt Copperwaite)</author><guid>https://matt.copperwaite.net/blog/maintenance-cost-of-security-controls/</guid><description>&lt;p>I used to work with a security architect who thought that every risk can be mitigated by use of &amp;ldquo;IP &lt;a href="https://www.ncsc.gov.uk/blog-post/terminology-its-not-black-and-white">white-lists&lt;/a>&amp;rdquo;.&lt;/p>
&lt;p>There are some immediate concerns with that approach in many scenarios. In most cases the poor user experience, and the ease in which it can be over-come. But one of the other concerns, that I often don&amp;rsquo;t see discussed, is the support impact of such a control.&lt;/p>
&lt;p>Firstly let&amp;rsquo;s assume that this is to limit user authentication. The user has to realise the reason that a service has been unavailable for hours, or days, is because their IP has changed. They will then have to find a way to request help through a different path.&lt;/p>
&lt;p>Even with a single user this could be a big over-head, requesting help several times a year. If they were using something like a 4G dongle for their internet connection, which changes IP addresses frequently, they could be requesting help several times a week. That is an extreme example, but multiply that by even a modest number of users and your support teams become overwhelmed. You could create some sort of self-service, but then why have the control at all? All it does is create bureaucracy.&lt;/p>
&lt;p>This post isn&amp;rsquo;t entirely about bashing IP allow-lists, although it demonstrates the issues effectively.&lt;/p>
&lt;p>Another example is using &lt;a href="https://docs.aws.amazon.com/whitepapers/latest/kms-best-practices/aws-managed-and-customer-managed-cmks.html">AWS&amp;rsquo;s Customer Managed Keys for KMS&lt;/a>. By using CMK you may have mitigated whatever concern you thought you had, but you now have to manage your own encryption keys. You have to create an entire ecosystem for managing those keys, ensure they&amp;rsquo;re protected, rotated, and retired securely. That has the additional effort that you are now not putting in to delivering value to your users, as well as the additional security risk associated with getting every step right.&lt;/p>
&lt;p>Any control proposed to mitigate a risk needs to be adequately weighed up and the impact and implications of that control has its own risks. You have to consider the secondary effects on how to effectively manage that control, and everything that comes with it.&lt;/p>
&lt;!--alex ignore knife fight -->
&lt;p>With IP allow-listing there is an interesting asymmetry between the risk and the control. The control is vastly more impactful than the thing you&amp;rsquo;re trying to protect against. To mix metaphors it&amp;rsquo;s like bringing a barn-door to a knife fight. You have to be careful that each control chosen is measured against the risk, rather than taken at face value.&lt;/p></description></item></channel></rss>